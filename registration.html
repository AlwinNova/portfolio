<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <title>Game Registration Form</title>
    <style>
        body{
            min-height: 1oovh;
            background: linear-gradient(135deg,#74ebd5,#9face6);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', sans-serif;
        }
    </style>
</head>

<body>
    <div class="container p-3 mb-2">
        <h2 class="mx-auto p-2shadow p-3 mb-3 bg-white rounded" style="width: fit-content;">Techwin User login</h2>
        <div class="row">
            <div class="col-md-6">
                <img class="img-fluid rounded shadow"
                    src="https://i.pinimg.com/736x/fb/a3/bc/fba3bccd7f28550fa9ca688d6bee6c25.jpg"
                    alt="techimg">
            </div>
            <div class="col-md-6">
                <form id="myform" class="needs-validation" novalidate>
                    <div class="row">
                        <div class="col-md-6">
                            <label for="fullname" class="form-label">Name<span class="text-danger">*</span></label>
                            <i class="bi bi-person-fill"></i>
                            <input type="text" class="form-control" id="fullname" name="fullname"
                                placeholder="Full name" pattern="[A-Za-z ]+" required>
                            <div class="invalid-feedback">Enter your name</div>
                        </div>
                        <div class="col-md-6">

                            <label for="email" class="form-label">Email<span class="text-danger">*</span></label>
                            <i class="bi bi-envelope-fill"></i>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Email"
                                required>
                            <div class="invalid-feedback">Enter a valid email</div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-md-6">
                            <label for="phonenumber" class="form-label">Phone<span class="text-danger">*</span></label>
                            <i class="bi bi-telephone-fill"></i>
                            <input type="tel" class="form-control" id="phonenumber" name="phonenumber"
                                placeholder="Phone number" required>
                            <div class="invalid-feedback">Enter your phone number</div>
                        </div>
                        <div class="col-md-6">
                            <label for="dob" class="form-label">Date of birth<span class="text-danger">*</span></label>
                            <i class="bi bi-calendar2-month-fill"></i>
                            <input type="date" class="form-control" id="dob" name="dob" required>
                            <div class="invalid-feedback">Enter your DOB</div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-md-6">
                            <label for="password" class="form-label">Password<span class="text-danger">*</span></label>
                            <i class="bi bi-lock-fill"></i>
                            <input type="password" class="form-control" id="password" name="password"
                                placeholder="Password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                title="Must contain at least one number, one uppercase and lowercase letter and at least 8 characters"
                                required>
                            <div class="invalid-feedback">Password must contain at least one number, one uppercase and
                                lowercase letter, and be at least 8 characters long</div>
                        </div>
                        <div class="col-md-6">
                            <label for="confirmpassword" class="form-label">Confirm Password<span
                                    class="text-danger">*</span></label>
                            <i class="bi bi-key-fill"></i><i class="bi bi-lock-fill"></i>
                            <input type="password" class="form-control" id="confirmpassword" name="confirmpassword"
                                placeholder="Confirm Password" required>
                            <div class="invalid-feedback">Passwords do not match</div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-6">
                            <label for="city" class="form-label">City<span class="text-danger">*</span></label>
                            <i class="bi bi-geo-alt-fill"></i>
                            <input type="text" class="form-control" id="city" name="city" placeholder="City" required>
                            <div class="invalid-feedback">Enter your city</div>
                        </div>
                        <div class="col-md-6">
                            <label for="country" class="form-label">Country<span class="text-danger">*</span></label>
                            <i class="bi bi-globe2"></i>

                            <input type="text" class="form-control" id="country" name="country" placeholder="Country"
                                required>
                            <div class="invalid-feedback">Enter your country</div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col">
                            <label for="address" class="form-label">Address<span class="text-danger">*</span></label>
                            <i class="bi bi-house-fill"></i>
                            <textarea class="form-control" id="address" name="address" placeholder="Address"
                                required></textarea>
                            <div class="invalid-feedback">Enter your address</div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-6">
                            <p>Gender <span class="text-danger">*</span><i class="bi bi-gender-ambiguous"></i></p>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" id="genderMale" name="gender" value="Male"
                                    required>
                                <label class="form-check-label" for="genderMale">Male</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" id="genderFemale" name="gender"
                                    value="Female" required>
                                <label class="form-check-label" for="genderFemale">Female</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" id="genderOthers" name="gender"
                                    value="Others" required>
                                <label class="form-check-label" for="genderOthers">Others</label>
                            </div>
                            <div class="invalid-feedback d-block">Choose your gender</div>
                        </div>

                        <div class="col-md-6">
                            <label for="sport" class="form-label">Select Sport<span class="text-danger">*</span></label>
                            <i class="bi bi-trophy-fill"></i>
                            <select class="form-select" id="sport" name="sport" required>
                                <option value="">Select the Sport you are willing to play</option>
                                <option value="Football">Football</option>
                                <option value="Basketball">Basketball</option>
                                <option value="Cricket">Cricket</option>
                            </select>
                            <div class="invalid-feedback">Choose a sport</div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col">
                            <p>Hobbies <span class="text-danger">*</span><i class="bi bi-hurricane"></i></p>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="hobbyGaming" name="hobbies"
                                    value="Video gaming">
                                <label class="form-check-label" for="hobbyGaming">Video gaming</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="hobbyReading" name="hobbies"
                                    value="Reading books">
                                <label class="form-check-label" for="hobbyReading">Reading books</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="hobbyOutdoor" name="hobbies"
                                    value="Playing outdoor games">
                                <label class="form-check-label" for="hobbyOutdoor">Playing outdoor games</label>
                            </div>
                            <div id="hobbyFeedback" class="text-danger d-none">Select at least one hobby</div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="float-md-end">
                                <button type="submit" class="btn btn-primary me-2" id="submitBtn">Submit</button>
                                <button type="reset" class="btn btn-secondary">Reset</button>
                            </div>
                        </div>
                    </div>
                </form>

                <script>
                    (function () {
                        'use strict';

                        const form = document.getElementById('myform');
                        const password = document.getElementById("password");
                        const confirmpassword = document.getElementById("confirmpassword");
                        const hobbyFeedback = document.getElementById("hobbyFeedback");

                        function validatePasswordMatch() {
                            if (password.value !== confirmpassword.value) {
                                confirmpassword.setCustomValidity("Passwords do not match");
                                confirmpassword.classList.add('is-invalid');
                                return false;
                            } else {
                                confirmpassword.setCustomValidity("");
                                confirmpassword.classList.remove('is-invalid');
                                return true;
                            }
                        }

                        function validateHobbies() {
                            const checked = document.querySelectorAll('input[name="hobbies"]:checked');
                            if (checked.length === 0) {
                                hobbyFeedback.classList.remove('d-none');
                                return false;
                            } else {
                                hobbyFeedback.classList.add('d-none');
                                return true;
                            }
                        }

                        confirmpassword.addEventListener('input', validatePasswordMatch);
                        password.addEventListener('input', validatePasswordMatch);

                        form.addEventListener('submit', function (event) {
                            const passwordsMatch = validatePasswordMatch();
                            const hobbiesValid = validateHobbies();

                            if (!form.checkValidity() || !passwordsMatch || !hobbiesValid) {
                                event.preventDefault();
                                event.stopPropagation();
                            } else {
                                event.preventDefault();

                                const data = new FormData(form);
                                const value = Object.fromEntries(data.entries());

                                const hobbies = [];
                                document.querySelectorAll('input[name="hobbies"]:checked').forEach(checkbox => {
                                    hobbies.push(checkbox.value);
                                });
                                value.hobbies = hobbies;

                                let records = [];
                                try {
                                    const storedData = localStorage.getItem('gameRegistrations');
                                    if (storedData) {
                                        records = JSON.parse(storedData);
                                        if (!Array.isArray(records)) {
                                            records = [];
                                        }
                                    }
                                } catch (e) {
                                    console.error("Error occurred:", e);
                                    records = [];
                                }

                                records.push(value);
                                localStorage.setItem('gameRegistrations', JSON.stringify(records));

                                window.location.href = "table.html";
                            }

                            form.classList.add('was-validated');
                        });

                    })();
                </script>
            </div>
        </div>
    </div>
</body>

</html>